---
title: 不用加减乘除做加法
date: 2019-07-22 22:48:00
img: https://gitee.com/wenguang0816/blogPic/raw/master/20190722-1.jpg
summary: 剑指 offer：48、不用加减乘除做加法
categories: 剑指 offer
tags:
  - 递归
  - 逻辑运算
---
### [48\. 不用加减乘除做加法](https://www.nowcoder.com/practice/59ac416b4b944300b617d4f7f111b215?tpId=13&tqId=11201&tPage=1&rp=1&ru=/ta/coding-interviews&qru=/ta/coding-interviews/question-ranking)

### 题目描述
写一个函数，求两个整数之和，要求在函数体内不得使用+、-、*、/四则运算符号。

### 解题思路：
题目要求不得使用+、-、*、/四则运算，了解计算机CPU的物理实现或者数字电路的同学应该知道，计算机完成计算是通过门电路（与门、非门、与非门等等）进行二进制运算来实现我们人类认知的所有运算的。我们先观察一下十进制进行运算的过程。这里我们以`8+14=22`为例：

1. 只做各位相加不进位，此时相加的结果是`12`（个位数8和4相加不进位是2，十位相加结果是1）
2. 做进位，8+4有进位，进位值为`10`
3. 将前两步的结果相加：`12+10`的结果为`22`，也就是8+14的结果。（重复1、2步骤）

可以看出，十进制进行加法运算时，最终的结果 = 无进位加法 + 进位值。这个结论同样适用于二进制运算，同样以`8+14`即`1000 + 1110`为例：
1. 只做各位相加不进位，此时结果为`0110`
2. 做进位，两者相加进位值为`10000`
3. 将两步结果相加：`0110 + 10000 = 10110`转化为十进制为`22`（重复1、2步骤）

我们来观察一下二进制运算1、2步的结果，`0110`是`1000 ^ 1110`的结果，`10000`是`1000 & 1110`后左移一位的结果。这样我们只需要重复1、2步骤，直到没有进位为止，便可得到最终结果。

### 解答：
```cpp
// 方法1: while循环
class Solution {
public:
    int Add(int num1, int num2)
    {
        // 最终的结果 = 无进位加法 + 进位值
        while (num2 != 0)
        {
            int temp = num1 ^ num2;
            num2 = (num1 & num2) << 1;
            num1 = temp;
        }
        return num1;
    }
};
// 方法2: 递归实现
class Solution {
public:
    int Add(int num1, int num2)
    {
        // 最终的结果 = 无进位加法 + 进位值
        return num2 ? Add(num1 ^ num2, (num1 & num2) << 1) : num1;
    }
};
```
